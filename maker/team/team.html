<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的团队</title>
    <meta name="viewport" content="width=device-width, user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="msapplication-tap-highlight" content="no"/>
    <link rel="stylesheet" type="text/css" href="/assets/common/css/main.css"/>
    <link rel="stylesheet" type="text/css" href="/assets/maker/css/team/team.css"/>
    <script type="text/javascript">/*resize.js*/
!function(a){function b(){var b=g.getBoundingClientRect().width;a.rem=(b/7.5>100?100:(b/7.5<40?40:b/7.5)),g.style.fontSize=a.rem+"px"}var g=a.document.documentElement,e;a.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(b,300)},!1),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(e),e=setTimeout(b,300))},!1),b()}(window);</script>
</head>
<body class="bg-cc">
<header>
    <div class="m-header g-border-b">
        <div class="header-left"><a href="javascript:void(0)" onclick="goBack();" class="back"></a></div>
        我的团队
    </div>
</header>
<div class="wrapper padding-wrapper-bottom" id="container">
    <div id="teamDatas hide">
        <div class="top-box">
            <i v-text="'直属导师：'+datas.masterName"></i>
            <h3 v-text="datas.userName"></h3>
            <span v-text="'团队人数：'+datas.teamCount"></span>
        </div>
        <ul class="team-list">
            <li class="g-border-b"><i class="g-border-r"></i><p>今日团队销售</p><span v-text="'¥'+datas.todayTeamSellMoney"></span></li>
            <li class="g-border-b"><i class="g-border-r"></i><p>今日团队邀请</p><span v-text="datas.todayTeamNewMember"></span></li>
            <li class="g-border-b"><p>今日团队佣金</p><span v-text="'¥'+datas.todayTeamCommision"></span></li>
            <li class="g-border-b"><i class="g-border-r"></i><p>本月团队销售</p><span v-text="'¥'+datas.monthlyTeamSellMoney"></span></li>
            <li class="g-border-b"><i class="g-border-r"></i><p>本月团队邀请</p><span v-text="datas.monthlyTeamNewMember"></span></li>
            <li class="g-border-b"><p>本月团队佣金</p><span v-text="'¥'+datas.monthlyTeamCommision"></span></li>
        </ul>
    </div>
    <div class="team-users hide">
        <div class="team-user-top g-border-b">团队成员列表 <a href="teamUsers.html">查看全部>></a></div>
        <ul>
            <li class="title">
                <div class="col-xs-3">昵称</div>
                <div class="col-xs-3">层级</div>
                <div class="col-xs-3">本月销售</div>
                <div class="col-xs-3">邀请类别</div>
            </li>
            <li v-for="item in teamList.teamMember">
                <div class="col-xs-3" v-text="item.userName"></div>
                <div class="col-xs-3" v-text="item.level | makerDeji"></div>
                <div class="col-xs-3" v-text="'¥'+item.monthlySellMoney"></div>
                <div class="col-xs-3" v-text="item.refType | refType">直拉/间拉</div>
            </li>
        </ul>
    </div>
</div>
<!-- footer -->
<style>
<style type="text/css">footer{}
footer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    max-width: 7.5rem;
    height: .98rem;
    margin: 0 auto;
    background-color: #fff;
}
footer ul {
    display: table;
    width: 100%;
}
footer ul li {
    display: table-cell;
    text-align: center;
}
footer ul li i {
    display: inline-block;
    width: .4rem;
    height: .4rem;
    margin-top: .1rem;
    margin-bottom: 0;
    background: url("/assets/maker/images/common/maker-nav.png") no-repeat;
    background-size: 1.75rem auto;
}
footer ul li p{
    margin-top: -.1rem;
}
footer ul li i.ma1 {
    background-position: 0 0;
}
footer ul li i.ma2 {
    background-position: -.72rem 0;
}
footer ul li i.ma3 {
    background-position: -1.28rem 0;
    width: .5rem;
}
footer ul li.active a{
    color: #fd4a4a;
}
footer ul li.active i.ma1 {
    background-position: 0 bottom;
}
footer ul li.active i.ma2 {
    background-position: -.72rem bottom;
}
footer ul li.active i.ma3 {
    background-position: -1.28rem bottom;
}</style>
<!-- html -->
<footer class="g-border-t">
    <ul class="fixed-bar">
        <li><a href="/maker/index/index.html"><i class="ma1"></i><p>创客</p></a></li>
        <li><a href="/maker/wenan/wenan.html#wenanstates=1"><i class="ma2"></i><p>内容</p></a></li>
        <li><a href="/maker/team/team.html"><i class="ma3"></i><p>团队</p></a></li>
    </ul>
</footer>

<script>
    //首页底部导航增加active样式
    $(function(){
        var linkArr = ['/maker/index/index.html','/maker/wenan/wenan.html#wenanstates=1','/maker/team/team.html'];
        for(var i=0; i<linkArr.length; i++){
            if(typeof(linkArr[i])=='object'){
                for(var j=0; j<linkArr[i].length; j++){
                    if(location.href.indexOf(linkArr[i][j]) > -1){
                        $('.fixed-bar li').removeClass('active');
                        $('.fixed-bar li').eq(i).addClass('active');
                        $('.fixed-bar li').eq(i).on('click', function(){
                            return false;
                        })
                    }
                }
            }else{
                if(location.href.indexOf(linkArr[i]) > -1){
                    $('.fixed-bar li').removeClass('active');
                    $('.fixed-bar li').eq(i).addClass('active');
                    $('.fixed-bar li').eq(i).on('click', function(){
                        return false;
                    })
                }
            };
        };
    });
</script>

</style>
<!-- 模板js文件 -->
<script type="text/javascript" src="/assets/common/js/main.js"></script>
<script type="text/javascript">
/*创客team.js*/
//REF是拉人；SYS时系统推荐
Vue.filter('refType', function (value) {
    var text="";
    switch(value){
        case 'REF':
            text='拉人';
            break;
        case 'SYS':
            text='系统推荐';
            break;             
    }
    return text;
});

var vm = new Vue({
    el: '#container',
    data: {
        datas: {}, //我的团队数据
        teamList:[], //团队成员列表
    },
    ready: function(){
        var This = this;
        //获取团队数据详情
        $.AJAX({
            url: config.basePath+"maker/svMaker/getTeamHomeInfo",
            success: function(data){
               This.datas=data.data;
               setTimeout(function(){
                $('#teamDatas').removeClass('hide');
               },config.containerShowTime);
            },
        });

        //获取团队成员列表
        $.AJAX({
            url: config.basePath+"maker/svMaker/getTeamMember",
            data:{
                level:0,   //int 当值为1时，查询其下一级的用户列表；当值为0时，查询其所有下级的用户列表
                page:1,   //int 页数，从1开始，默认1
                pageSize:4,   //int 每页个数，默认10个
            },
            success: function(data){
               This.teamList=data.data;
               console.log(data.data)
               setTimeout(function(){
                $('.team-users').removeClass('hide');
               },config.containerShowTime);
            },
        });


    },
    methods: {
        
    }
});

    </script>
</body>
</html>